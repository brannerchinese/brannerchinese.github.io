<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>&</title>
	<meta name="description" content="">
	<meta name="author" content="David Prager Branner">

	<!-- HTML5 shim, for IE6-8 support of HTML elements -->
	<!--[if lt IE 9]>
		<script src="http://brannerchinese.github.io/theme/html5.js"></script>
	<![endif]-->

	<!-- Styles -->
	<link href="http://brannerchinese.github.io/theme/bootstrap.min.css" rel="stylesheet">
	<link href="http://brannerchinese.github.io/theme/local.css" rel="stylesheet">
	<link href="http://brannerchinese.github.io/theme/pygments.css" rel="stylesheet">

    <!-- Feeds -->
    <link href="http://brannerchinese.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="& Atom Feed" />

</head>
<body>
	<div class="topbar">
	  <div class="topbar-inner">
		<div class="container-fluid">
		  <a class="brand" href="http://brannerchinese.github.io/">&</a>
			<ul class="nav">
					<li class="active"><a href="http://brannerchinese.github.io/category/misc.html">misc</a></li>
			</ul>
			<p class="pull-right"><a href="http://brannerchinese.github.io/archives.html">[archives]</a> <a href="http://brannerchinese.github.io/tags.html">[tags]</a></p>
		</div>
	  </div>
	</div>

	<div class="container-fluid">
	  <div class="sidebar">
		<div class="well">
			<h3>Blogroll</h3>
			<ul>
				<li><a href="https://brannerchinese.com/dpb/publications.html">Publications</a></li>
			</ul>
			<div class="social">
			<h3>Social</h3>
			<ul>
				<li><a href="/feeds/all.atom.xml">RSS</a></li>
			</ul>
			</div>
		</div>
	  </div>
	  <div class="content">
	<div class='article'>
		<div class="page-header"><h1>Avoid deleting the contents of a file in Python through sloppy use of "write" mode</h1></div>
		<div class="well small">Permalink: <a class="more" href="http://brannerchinese.github.io/avoid-deleting-the-contents-of-a-file-in-python-through-sloppy-use-of-write-mode.html">2012-03-03 23:51:00</a>
by <a class="url fn" href="http://brannerchinese.github.io/author/david-prager-branner.html">David Prager Branner </a>
 in <a href="http://brannerchinese.github.io/category/misc.html">misc</a>
</div>
		<div><p>The safest way to open files in Python, whether for reading or writing,
is by using the <code>with</code> statement:</p>
<div class="highlight"><pre><span class="n">with</span> <span class="n">open</span><span class="p">(</span><span class="err">&#39;</span><span class="n">file</span><span class="p">.</span><span class="n">txt</span><span class="err">&#39;</span><span class="p">,</span> <span class="sc">&#39;r&#39;</span><span class="p">)</span> <span class="n">as</span> <span class="n">f</span><span class="o">:</span>

    <span class="n">f</span><span class="p">.</span><span class="n">read</span><span class="p">()</span> <span class="err">#</span> <span class="n">and</span> <span class="k">do</span> <span class="n">some</span> <span class="n">other</span> <span class="n">things</span><span class="p">...</span>
</pre></div>


<p>The <code>with</code> statement ensures that the file's exit code is executed,
closing the file no matter what interruptions may take place. That
prevents files from becoming locked unexpectedly. Some people suggest
embedding the whole <code>with</code> block in a <code>try-except</code> block to catch
exceptions.</p>
<p>However, there is one disaster that may befall you even when using
<code>with</code>. If you open an existing file with a mode of <code>'w'</code> (write)
instead of <code>'r'</code> (read), the content of the file will be completely
overwritten, even if you do nothing to the file other than open it for
writing. It will have a size of 0 and no content at all.</p>
<p>Since you have probably typed a mode of <code>'w'</code> inadvertently, there is no
point recommending the use of other modes as safeties. The safest way to
avoid this problem is to ensure that the file you are reading from is
backed up somewhere. That way, if you type <code>'w'</code> instead of <code>'r'</code>, you
will still have an easy way to recover.</p></div>
		<div>
			<h2>Comments</h2>
		<div>
	</div>	
		<footer>
		  <p>Powered by <a href="http://getpelican.com/">Pelican</a>. Theme based on <a href="http://twitter.github.com/bootstrap/">Twitter Bootstrap</a>.</p>
		  <p>&copy; David Prager Branner</p>
		</footer>
	  </div>

	</div>
</body>
</html>